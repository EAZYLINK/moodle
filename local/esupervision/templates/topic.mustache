{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_esupervision/topic

    TODO describe template topic

    Example context (json):
    {
    }
}}
{{#issupervisor}}
<table class="table">
  <caption class="text-center">
    Submitted Topics
  </caption>
  <tbody>
    <tr>
      <th>SN</th>
      <th>Student Name</th>
      <th>Topic</th>
      <th>Description</th>
      <th>Status</th>
    </tr>
    {{#topics}}
    <tr>
      <td>{{ id }}</td>
      <td>{{ studentname }}</td>
      <td>{{ topic }}</td>
      <td>{{{ description }}}</td>
      <td>{{ status }}</td>
      <td>
        <button class="btn"><a href="?action=view&id={{ id }}">view</a></button>
      </td>
    </tr>
    {{/topics}}
  </tbody>
</table>
{{/issupervisor}}

{{^issupervisor}}
<div class="container">
  <h4 class="mt-5">Submitted topics</h4>
  <div class="row">
    {{#topics}}
    <div class="max-auto card m-3">
        <div class="card-header mb-2"><strong>Topic:   </strong>{{ topic }}</div>
        <div class="card-body">
                <div class="card-text"><strong>Description:   </strong>   {{{ description }}}</div>
                <div class="card-text"><strong>Status:   </strong>  {{ status }}</div>
                <small class="card-text">submitted date:  <span class="badge badge-secondary">{{timecreated}}</span></small><br>
                <small class="card-text">Last modified:   <span class="badge badge-secondary">{{timemodified}}</span></small><br>
                {{#feedbacks}}
                <div class="card mt-2">
                <div class="card-header"><strong>Supervisor's comment:</strong></div>
                 <div class="card-text px-2">*  {{{feedback}}} <span class="badge badge-secondary">{{timecreated}}</span></div>
                </div>
                {{/feedbacks}}
        </div>
        <div class="card-footer text-center mt-3">
            <a href="?action=edit&id={{ id }}" class="btn btn-outline-primary mx-3"><img src="assets/edit.png"></a>
            <a href="?action=delete&id={{ id }}" class="btn btn-outline-primary mx-3"><img src="assets/delete.png"></a>
        </div>
    </div>
    {{/topics}}
  </div>
</div>
{{/issupervisor}}

{{#viewtopic}}
<div class="container">
  <h4 class="mt-5">Topic details</h4>
        {{#topic}}
        <div class="card mb-5 max-auto">
        <div class="card-header">Topic: {{ topic }}</div>
        <div class="card-body">
            <div class="card-text"><strong>Description: </strong>{{{ description }}}</div>
            <div class="card-text"><strong>Student name: </strong>{{ studentname }}</div>
            <div class="card-text"><strong>Status:  </strong> {{ status }}</div>
            <small class="card-text">Last modified: <span class="badge badge-secondary">{{timemodified}}</span></small><br>
        {{/topic}}
            <div class="card mt-2">
                <div class="card-header"><strong>Comments:</strong></div>
                        {{#feedbacks}}
                        <div class="card-body" style="display: flex; justify-content: space-between; align-items: center;">
                            <p class="card-text">{{{feedback}}} </p>
                            <small class="badge badge-secondary mx-2">{{timecreated}}</small>
                            <a href="?action=editfeedback&id={{ id }}" class="btn mx-3"><img src="assets/edit.png"></a>
                            <a href="?action=deletefeedback&id={{ id }}" class="btn mx-3"><img src="assets/delete.png"></a>
                        </div>
                        {{/feedbacks}}
                </div>
            </div>
        <div class="card-footer text-center mt-3">
            <a href="?action=approve&id={{ id }}" class="btn btn-primary mx-2">Approve</a>
            <a href="?action=reject&id={{ id }}" class="btn btn-primary mx-2">Reject</a>
        </div>
  </div>
{{/viewtopic}}


